<% include ./partial/header %>
<% include ./partial/studfunction %>

<div class="col-sm-6" style="flex: 0 0 50%; max-width: 50%; margin-left: 431px; margin-top: -181px; text-align: -webkit-center;">
  <h1>Apply for leave here</h1>
  <form action="/faculty/<%=faculty._id%>/apply" method="POST">
    <div class="form-group">
      <input type="text" placeholder="subject" name="leave[subject]" class="form-control" />
    </div>
    <div class="form-group">
      <label for="type">Type of Leave:</label><br>
      <input type="radio" id="cl" name="leave[type]" value="cl" checked>
      <label for="cl">Casual Leave</label><br>
      <input type="radio" id="el" name="leave[type]" value="el">
      <label for="el">Earned Leave</label><br>
      <input type="radio" id="od" name="leave[type]" value="od">
      <label for="od">On Duty</label><br>
      <input type="radio" id="ml" name="leave[type]" value="ml">
      <label for="ml">Medical Leave</label>
    </div>
    <div class="form-group">
      <label for="from">From:</label>
      <input type="date" data-date-inline-picker="true" id="from" name="leave[from]" />
    </div>
    <div class="form-group">
      <label for="to">To:</label>
      <input type="date" data-date-inline-picker="true" id="to" name="leave[to]" />
    </div>
    <!-- <div class="form-group">
      <label for="faculty">Faculty For Engagement:</label>
      <select id="faculty" name="leave[faculty]">
        <option value="">Select faculty name</option>
        <option value="<%=faculty._id%>">Amit Sir</option>
        <option value="<%=faculty._id%>">Jai Sir</option>
        <option value="<%=faculty._id%>">Bhavna Gupta</option>
        <option value="<%=faculty._id%>">Abhuday Sir</option>
        <option value="<%=faculty._id%>">Rahul Dubey</option>
      </select>
    </div> -->
    <!-- <div class="form-group">
      <label for="engagement">Engagement:</label>
      <select id="engagement" name="leave[engagement]">
        <option value="">Select engagement</option>
        <option value="research">Research</option>
        <option value="teaching">Teaching</option>
        <option value="admin">Administration</option>
      </select>
    </div> -->
    <div class="form-group">
      <button class="btn btn-lg btn-block btn-default" onclick="decrementCount()">Submit</button>
    </div>
  </form>
</div>

<script>
  // Function to decrement the selected leave count by 1 on form submit
  function decrementCount() {
    const selectedType = document.querySelector('input[name="leave[type]"]:checked').value;
    const countInput = document.querySelector(`input[name="faculty[${selectedType}]"]`);
    if (countInput) {
      countInput.value--;
    }
  }
</script>

<% include ./partial/footer %>
